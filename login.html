<!DOCTYPE html>
<html lang=en>
    <head>
        <meta charset="utf-8" />
        <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
        <link rel="icon" type="image/png" href="../assets/img/favicon.png">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <title>
          BookMe
        </title>
        <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
        <!--     Fonts and icons     -->
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
        <!-- CSS Files -->
        <link href="./css/material-kit.css"  rel="stylesheet" />
        <script src="./js/core/jquery.min.js" type="text/javascript"></script>
        <script src="./js/core/popper.min.js" type="text/javascript"></script>
        <script src="./js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
        <script src="./js/plugins/moment.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script async defer src="https://buttons.github.io/buttons.js"></script>
      </head>

      <body class="login-page sidebar-collapse">
        <nav class="navbar navbar-color-on-scroll navbar-transparent    fixed-top  navbar-expand-lg " color-on-scroll="100" id="sectionsNav">
          <div class="container">
            <div class="navbar-translate">
              <a class="navbar-brand" href="./src/host/index.html">
                BookMe </a>
            </div>
          </div>
        </nav>
        <div class="page-header header-filter" style="background-color: white;">
          <div class="container">
            <div class="row">
              <div class="col-lg-4 col-md-6 col-sm-8 ml-auto mr-auto">             
                  <div class="card card-login card-hidden" style="top: 70%;">
                    <div class="card-header card-header-primary text-center">
                      <h4 class="card-title">Login</h4>
                      <div class="center-align" >
                        <a id="gSignIn" class="oauth-container btn darken-4 white black-text" style="text-transform:none">
                            <div class="left">
                                <img width="20px" style="margin-top:7px; margin-right:8px" alt="Google sign-in" 
                                    src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png" />
                            </div>
                            Sign in 
                        </a>
                    </div>
                    </div>
                    
                    <!-- <div class="card-body ">
                      <p class="card-description text-center">Or Be Classical</p>
                      <span class="bmd-form-group">
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i class="material-icons">email</i>
                            </span>
                          </div>
                          <input id='formemail' onblur="getEmail()" type="email" class="form-control" placeholder="Email...">
                          <small id="userEmailError" class="form-text text-danger" style="display: none;">Please check your email address.</small>
                        </div>
                      </span>
                      <span class="bmd-form-group">
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              <i class="material-icons">lock_outline</i>
                            </span>
                          </div>
                          <input id='formpassword' onblur="getPassword()" type="password" class="form-control" placeholder="Password...">
                          <small id="userPasswordError" class="form-text text-danger" style="display: none;">Your password must be uppercase, lowercase and more than 10 characters.</small>
                        </div>
                      </span>
                    </div> -->
                    <!-- <div class="card-footer justify-content-center">
                      <a onclick="signIn()" class="btn btn-rose btn-link btn-lg">Lets Go</a>
                    </div> -->
                  </div>
             
                <!-- <div><h4><a href="signup.html" style="color: white;">Are you a new guest?</a></h4></div> -->
              </div>
            </div>
            <div style="display: flex; justify-content: space-between; flex-wrap: wrap; padding-top: 3em;">
              <img src="./img/undraw_lighthouse_frb8.svg" style="width: 60%; padding-top: 3em;"/>
              <img src="./img/undraw_trip_re_f724.svg" style="width: 40%; padding-top: 3em;"/>
            </div>
          </div>
          <footer class="footer">
            <div class="container">
              
              <div class="copyright float-right">
                &copy;
                <script>
                  document.write(new Date().getFullYear())
                </script>, made with <i class="material-icons" style="color: red;">favorite</i> by
                <a href="https://www.creative-tim.com" target="_blank">Maame Nyarko</a>
              </div>
            </div>
          </footer>
        </div>
        <!--   Core JS Files   -->
        <script src="./js/core/jquery.min.js" type="text/javascript"></script>
        <script src="./js/core/popper.min.js" type="text/javascript"></script>
        <script src="./js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
        <script src="./js/plugins/moment.min.js"></script>
        <!--	Plugin for the Datepicker, full documentation here: https://github.com/Eonasdan/bootstrap-datetimepicker -->
        <script src="./js/plugins/bootstrap-datetimepicker.js" type="text/javascript"></script>
        <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
        <script src="./js/plugins/nouislider.min.js" type="text/javascript"></script>
        <!--  Google Maps Plugin    -->
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAkpJhu166GoiLCkiRzVYLZdb-5DvYGuss"></script>
        <!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
        <script src="./js/plugins/bootstrap-tagsinput.js"></script>
        <!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
        <script src="./js/plugins/bootstrap-selectpicker.js" type="text/javascript"></script>
        <!--	Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
        <script src="./js/plugins/jasny-bootstrap.min.js" type="text/javascript"></script>
        <!--	Plugin for Small Gallery in Product Page -->
        <script src="./js/plugins/jquery.flexisel.js" type="text/javascript"></script>
        <!-- Control Center for Material Kit: parallax effects, scripts for the example pages etc -->
        <script src="./js/material-kit.js?v=2.2.0" type="text/javascript"></script>
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
        <script type="module">
          // Import the functions you need from the SDKs you need
          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-app.js";
          import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-analytics.js";
          import { getAuth, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-auth.js";
          import { getDatabase } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-database.js";
          // TODO: Add SDKs for Firebase products that you want to use
          // https://firebase.google.com/docs/web/setup#available-libraries
        
          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
          const firebaseConfig = {
            apiKey: "AIzaSyAN-hSy8cWKUKJS4SxjNcN9lrmvZPTy430",
            authDomain: "booking-app-6750f.firebaseapp.com",
            databaseURL: "https://booking-app-6750f-default-rtdb.firebaseio.com",
            projectId: "booking-app-6750f",
            storageBucket: "booking-app-6750f.appspot.com",
            messagingSenderId: "687482685582",
            appId: "1:687482685582:web:a91f903ce5133c4f5aa1df",
            measurementId: "G-0WDDDKD9ZL"
          };
        
          // Initialize Firebase
          const app = initializeApp(firebaseConfig);
          const analytics = getAnalytics(app);
          const auth = getAuth();
          const provider = new GoogleAuthProvider();  

          let user = JSON.parse(localStorage.getItem('user'));
          //console.log(user.email);
          //console.log(user.password);
          //console.log(user.name);

          

          const signinBtn = document.querySelector('#gSignIn');
          signinBtn.addEventListener('click', e => {
            e.preventDefault();
            console.log("You're right! I'm dumb :)");
            console.log(auth);
            signInWithPopup(auth, provider).then((result) => {
              console.log(result);
              const token = result.user.accessToken;
              console.log(token);
              // The signed-in user info
              const user = result.user;
              window.location = 'UserAccount.html';
            }).catch((error) => {
              // Handle Errors here
              const errorCode = error.code;
              const errorMessage = error.message;
              // The email of the user's account used
              const email = error.email;
              // The AuthCredential type that was used
              console.log(errorCode, errorMessage, 'for user: '+email);

            });
          //   signInWithPopup(auth, provider).then((result) => {
          //   // This gives you a Google Access Token. You can use it to access the Google API
          //   const credential = GoogleAuthProvider.credentialFromResult(result);
          //   const token = credential.accessToken;
          //   // The signed-in user info
          //   const user = result.user;
          //   window.location = 'UserAccount.html';
          // }).catch((error) => {
          //   // Handle Errors here
          //   const errorCode = error.code;
          //   const errorMessage = error.message;
          //   // The email of the user's account used
          //   const email = error.email;
          //   // The AuthCredential type that was used
          //   const credential = GoogleAuthProvider.credentialFromError(error);
          // });
          });
          
          // signInWithEmailAndPassword(auth, user.email, user.password).then((userCredential) => {
          // //signed in
          // var user = userCredential.user; 
          // user.displayName = userName; 
          // console.log(user);           
                    
          // }).catch((error) => {
          //   var errorCode = error.code;
          //   var errorMessage = error.message;
          // });
          
          
        </script>

       
      </body>
</html>